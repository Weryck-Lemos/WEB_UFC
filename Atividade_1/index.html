<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Controle de Notas de Alunos</title>

  <style>

    .form {
      display: grid;
      gap: 12px;
      margin-bottom: 12px;
    }

    label { 
        display: grid; gap: 6px; font-size: 14px; 
    }

    input { 
        padding: 8px; 
    }

    .actions { 
        display: flex; gap: 8px; 
    }
    button { 
        padding: 9px 12px;; 
    }

    #tabela { border-collapse: collapse; width: 100%; }
    #tabela th, #tabela td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    #tabela thead { background: #f1f1f1; }


    tr.aprovado { background: #9ce4b4; }   
    tr.reprovado { background: #ffb7be; }  
  </style>
</head>
<body>
  <h1>Controle de Notas de Alunos</h1>

  <div class="form">
    <label>
      Nome do aluno
      <input id="nome" type="text" placeholder="Ex.: Ana Souza">
    </label>
    <label>
      Nota 1
      <input id="n1" type="number" step="0.01" min="0" max="10" placeholder="0–10">
    </label>
    <label>
      Nota 2
      <input id="n2" type="number" step="0.01" min="0" max="10" placeholder="0–10">
    </label>

    <div class="actions">
      <button id="add" type="button">Adicionar Aluno</button>
      <button id="clear" type="button">Limpar Lista</button>
    </div>
  </div>

  <p class="hint">Clique em uma linha para remover o aluno.</p>

  <table id="tabela">
    <thead>
      <tr>
        <th>Nome</th>
        <th>Nota 1</th>
        <th>Nota 2</th>
        <th>Média</th>
        <th>Situação</th>
      </tr>
    </thead>
    <tbody id="tbody">
      <!-- novas linhas -->
    </tbody>
  </table>

  <script>
    const nome = document.getElementById('nome');
    const n1 = document.getElementById('n1');
    const n2 = document.getElementById('n2');
    const addBtn = document.getElementById('add');
    const clearBtn = document.getElementById('clear');
    const tbody = document.getElementById('tbody');


    function toNum(v){
      const x = parseFloat(String(v).replace(',', '.'));
      return Number.isFinite(x) ? x : NaN;
    }

    function media2(a, b){ return (a + b) / 2; }
    function situacao(media){ return media >= 7 ? 'Aprovado' : 'Reprovado'; }
    function classe(media){ return media >= 7 ? 'aprovado' : 'reprovado'; }
    function format(n){ return Number(n).toFixed(2).replace('.', ','); }

    function addAluno(){
      const nomeVal = (nome.value || '').trim();
      const n1Val = toNum(n1.value);
      const n2Val = toNum(n2.value);

        if(!nomeVal){ 
            alert('Informe o nome do aluno.'); nome.focus(); return; 
        }

        if(!Number.isFinite(n1Val) || n1Val < 0 || n1Val > 10){ 
            alert('Nota 1 inválida (0 a 10).'); n1.focus(); return; 
        }
    
        if(!Number.isFinite(n2Val) || n2Val < 0 || n2Val > 10){ 
            alert('Nota 2 inválida (0 a 10).'); n2.focus(); return; 
        }

      const m = media2(n1Val, n2Val);
      const tr = document.createElement('tr');
      tr.className = classe(m);
      tr.innerHTML = `
        <td>${escapeHtml(nomeVal)}</td>
        <td>${format(n1Val)}</td>
        <td>${format(n2Val)}</td>
        <td><strong>${format(m)}</strong></td>
        <td>${situacao(m)}</td>
      `;

      tbody.appendChild(tr);

      nome.value = '';
      n1.value = '';
      n2.value = '';
      nome.focus();
    }

    function escapeHtml(s){
      return s.replace(/[&<>\"']/g, c => ({
        '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'
      })[c]);
    }

    addBtn.addEventListener('click', addAluno);

    nome.addEventListener('keydown', e => { if(e.key === 'Enter') n1.focus(); });
    n1.addEventListener('keydown', e => { if(e.key === 'Enter') n2.focus(); });
    n2.addEventListener('keydown', e => { if(e.key === 'Enter') addAluno(); });

    clearBtn.addEventListener('click', () => { tbody.innerHTML = ''; });

    tbody.addEventListener('click', (e) => {
      const tr = e.target.closest('tr');
      if(tr) tr.remove();
    });
  </script>
</body>
</html>
